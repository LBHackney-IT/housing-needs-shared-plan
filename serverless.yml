service: hn-shared-plan

provider:
  name: aws
  runtime: nodejs12.x
  region: eu-west-2
  stage: ${opt:stage}
  profile: hnserverless

package:
  individually: true
  exclude:
    - ./**

functions:
  hn-shared-plan:
    name: hn-shared-plan-${self:provider.stage}
    handler: lambda.handler
    package:
      include:
        - lambda.js
        - next.config.js
        - lib/**
        - pages/**
        - build/_next/**
        - node_modules/**

    events:
      - http:
          path: api/{proxy+}
          method: ANY
          authorizer: aws_iam # replace this with our authorizer
      - http: ANY /
      - http: ANY /{proxy+}

    environment:
      ENV: ${self:provider.stage}
